{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///reacolo.js","webpack:///webpack/bootstrap 10dd02ef4d5f49e843f0","webpack:///external {\"root\":\"React\",\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}","webpack:///./lib/ComponentFilter.jsx","webpack:///./lib/EcologyFilter.jsx","webpack:///./lib/RoleFilter.jsx","webpack:///./lib/context-prop-type.js","webpack:///./lib/dirty-model-sync.js","webpack:///./lib/index.js","webpack:///external {\"root\":\"SockJS\",\"amd\":\"sockjs-client\",\"commonjs\":\"sockjs-client\",\"commonjs2\":\"sockjs-client\"}"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_8__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_react","_react2","ComponentFilter","props","rendered","createElement","children","propTypes","PropTypes","bool","isRequired","node","_ComponentFilter","_ComponentFilter2","filters","atLeast","target","context","every","role","roleAssignations","strict","keys","length","filter","method","targetOrTargets","methodFilter","some","EcologyFilter","shouldRender","oneOfType","arrayOf","string","oneOf","shape","objectOf","number","defaultProps","includes","RoleFilter","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","i","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_sockjsClient","_sockjsClient2","nullFunc","ModelSync","serverAddress","arguments","undefined","location","host","_PREFIX","_role","_appData","_context","onUpdate","onConnected","onDisconnected","_socket","onmessage","_onSocketMessage","bind","onopen","_onSocketOpen","onclose","_onSocketClose","appData","_socketSend","originalMessage","message","JSON","parse","data","messageType","type","messageData","clientRoles","console","warn","send","stringify","get","contextPropType","dirtyModelSync"],"mappings":"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","file":"reacolo.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"sockjs-client\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"sockjs-client\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reacolo\"] = factory(require(\"react\"), require(\"sockjs-client\"));\n\telse\n\t\troot[\"reacolo\"] = factory(root[\"React\"], root[\"SockJS\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"sockjs-client\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"sockjs-client\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"reacolo\"] = factory(require(\"react\"), require(\"sockjs-client\"));\n\telse\n\t\troot[\"reacolo\"] = factory(root[\"React\"], root[\"SockJS\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(7);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ComponentFilter = function ComponentFilter(props) {\n\t  if (!props.rendered) {\n\t    return null;\n\t  }\n\t  return _react2.default.createElement(\n\t    'div',\n\t    null,\n\t    props.children\n\t  );\n\t};\n\t\n\tComponentFilter.propTypes = {\n\t  rendered: _react2.default.PropTypes.bool.isRequired,\n\t  children: _react2.default.PropTypes.node.isRequired\n\t};\n\t\n\texports.default = ComponentFilter;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _ComponentFilter = __webpack_require__(2);\n\t\n\tvar _ComponentFilter2 = _interopRequireDefault(_ComponentFilter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar filters = {\n\t  atLeast: function atLeast(target, context) {\n\t    return target.every(function (role) {\n\t      return context.roleAssignations[role] > 0;\n\t    });\n\t  },\n\t  strict: function strict(target, context) {\n\t    return Object.keys(context.roleAssignations).length === target.length && filters.atLeast(target, context);\n\t  }\n\t};\n\t\n\tvar filter = function filter(method, targetOrTargets, context) {\n\t  var methodFilter = filters[method];\n\t  if (typeof targetOrTargets[0] === 'string') {\n\t    return methodFilter(targetOrTargets, context);\n\t  }\n\t  return targetOrTargets.some(function (target) {\n\t    return methodFilter(target, context);\n\t  });\n\t};\n\t\n\tvar EcologyFilter = function EcologyFilter(props) {\n\t  var shouldRender = filter(props.method, props.target, props.context);\n\t  return _react2.default.createElement(\n\t    _ComponentFilter2.default,\n\t    { rendered: shouldRender },\n\t    props.children\n\t  );\n\t};\n\t\n\tEcologyFilter.propTypes = {\n\t  target: _react2.default.PropTypes.oneOfType([_react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string), _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string))\n\t  // TODO:\n\t  // - React.PropTypes.objectOf(React.PropTypes.number)\n\t  // - React.PropTypes.arrayOf(React.PropTypes.objectOf(React.PropTypes.number))\n\t  ]).isRequired,\n\t  method: _react2.default.PropTypes.oneOf(['atLeast', 'strict']),\n\t  children: _react2.default.PropTypes.node.isRequired,\n\t  context: _react2.default.PropTypes.shape({\n\t    roleAssignations: _react2.default.PropTypes.objectOf(_react2.default.PropTypes.number).isRequired\n\t  }).isRequired\n\t};\n\t\n\tEcologyFilter.defaultProps = {\n\t  method: 'atLeast'\n\t};\n\t\n\texports.default = EcologyFilter;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _ComponentFilter = __webpack_require__(2);\n\t\n\tvar _ComponentFilter2 = _interopRequireDefault(_ComponentFilter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar filter = function filter(targetOrTargets, role) {\n\t  if (typeof target === 'string') {\n\t    return targetOrTargets === role;\n\t  }\n\t  return targetOrTargets.includes(role);\n\t};\n\t\n\tvar RoleFilter = function RoleFilter(props) {\n\t  return _react2.default.createElement(\n\t    _ComponentFilter2.default,\n\t    { rendered: filter(props.target, props.context.role) },\n\t    props.children\n\t  );\n\t};\n\t\n\tRoleFilter.propTypes = {\n\t  target: _react2.default.PropTypes.oneOfType([_react2.default.PropTypes.string, _react2.default.PropTypes.arrayOf(_react2.default.PropTypes.string)]).isRequired,\n\t  children: _react2.default.PropTypes.node.isRequired,\n\t  context: _react2.default.PropTypes.shape({\n\t    role: _react2.default.PropTypes.string\n\t  }).isRequired\n\t};\n\t\n\texports.default = RoleFilter;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = _react2.default.PropTypes.shape({\n\t  role: _react2.default.PropTypes.string,\n\t  roleAssignations: _react2.default.PropTypes.objectOf(_react2.default.PropTypes.number).isRequired\n\t});\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _sockjsClient = __webpack_require__(8);\n\t\n\tvar _sockjsClient2 = _interopRequireDefault(_sockjsClient);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar nullFunc = function nullFunc() {};\n\t\n\tvar ModelSync = function () {\n\t  function ModelSync() {\n\t    var serverAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://' + location.host + ModelSync._PREFIX;\n\t    var role = arguments[1];\n\t\n\t    _classCallCheck(this, ModelSync);\n\t\n\t    this._role = role;\n\t\n\t    this._appData = null;\n\t    this._context = null;\n\t\n\t    this.onUpdate = nullFunc;\n\t    this.onConnected = nullFunc;\n\t    this.onDisconnected = nullFunc;\n\t\n\t    this._socket = new _sockjsClient2.default(serverAddress);\n\t    this._socket.onmessage = this._onSocketMessage.bind(this);\n\t    this._socket.onopen = this._onSocketOpen.bind(this);\n\t    this._socket.onclose = this._onSocketClose.bind(this);\n\t  }\n\t\n\t  _createClass(ModelSync, [{\n\t    key: 'setAppData',\n\t    value: function setAppData(appData) {\n\t      this._socketSend('set_app_data', appData);\n\t    }\n\t  }, {\n\t    key: '_onSocketOpen',\n\t    value: function _onSocketOpen() {\n\t      if (this._role) {\n\t        this._socketSend('set_socket_role', this._role);\n\t      }\n\t      this._socketSend('app_data_request', this._role);\n\t      this.onConnected();\n\t    }\n\t  }, {\n\t    key: '_onSocketMessage',\n\t    value: function _onSocketMessage(originalMessage) {\n\t      var message = JSON.parse(originalMessage.data);\n\t      var messageType = message.type;\n\t      var messageData = message.data;\n\t      switch (messageType) {\n\t        case 'app_data':\n\t          this._appData = messageData;\n\t          this.onUpdate(this._appData, this._context);\n\t          break;\n\t        case 'meta_data':\n\t          this._context = {\n\t            role: this._role,\n\t            roleAssignations: messageData.clientRoles\n\t          };\n\t          this.onUpdate(this._appData, this._context);\n\t          break;\n\t        default:\n\t          console.warn('Unknown message type: ' + messageType);\n\t      }\n\t    }\n\t  }, {\n\t    key: '_onSocketClose',\n\t    value: function _onSocketClose() {\n\t      this.onDisconnected();\n\t    }\n\t  }, {\n\t    key: '_socketSend',\n\t    value: function _socketSend(type, data) {\n\t      this._socket.send(JSON.stringify({ type: type, data: data }));\n\t    }\n\t  }, {\n\t    key: 'role',\n\t    get: function get() {\n\t      return this._role;\n\t    }\n\t  }]);\n\t\n\t  return ModelSync;\n\t}();\n\t\n\texports.default = ModelSync;\n\t\n\t\n\tModelSync._PREFIX = '/socket';\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar EcologyFilter = __webpack_require__(3);\n\tvar RoleFilter = __webpack_require__(4);\n\tvar contextPropType = __webpack_require__(5);\n\tvar dirtyModelSync = __webpack_require__(6);\n\t\n\tmodule.exports = { EcologyFilter: EcologyFilter, RoleFilter: RoleFilter, contextPropType: contextPropType, dirtyModelSync: dirtyModelSync };\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// reacolo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 10dd02ef4d5f49e843f0","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\"}\n// module id = 1\n// module chunks = 0","import React from 'react';\n\nconst ComponentFilter = (props) => {\n  if (!props.rendered) {\n    return null;\n  }\n  return <div>{props.children}</div>;\n};\n\nComponentFilter.propTypes = {\n  rendered: React.PropTypes.bool.isRequired,\n  children: React.PropTypes.node.isRequired\n};\n\nexport default ComponentFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/ComponentFilter.jsx","import React from 'react';\nimport ComponentFilter from './ComponentFilter';\n\nconst filters = {\n  atLeast(target, context) {\n    return target.every(role => context.roleAssignations[role] > 0);\n  },\n  strict(target, context) {\n    return Object.keys(context.roleAssignations).length === target.length\n      && filters.atLeast(target, context);\n  }\n};\n\nconst filter = (method, targetOrTargets, context) => {\n  const methodFilter = filters[method];\n  if (typeof targetOrTargets[0] === 'string') {\n    return methodFilter(targetOrTargets, context);\n  }\n  return targetOrTargets.some(target => methodFilter(target, context));\n};\n\nconst EcologyFilter = (props) => {\n  const shouldRender = filter(props.method, props.target, props.context);\n  return (\n    <ComponentFilter rendered={shouldRender}>\n      { props.children }\n    </ComponentFilter>\n  );\n};\n\nEcologyFilter.propTypes = {\n  target: React.PropTypes.oneOfType([\n    React.PropTypes.arrayOf(React.PropTypes.string),\n    React.PropTypes.arrayOf(React.PropTypes.arrayOf(React.PropTypes.string))\n    // TODO:\n    // - React.PropTypes.objectOf(React.PropTypes.number)\n    // - React.PropTypes.arrayOf(React.PropTypes.objectOf(React.PropTypes.number))\n  ]).isRequired,\n  method: React.PropTypes.oneOf(['atLeast', 'strict']),\n  children: React.PropTypes.node.isRequired,\n  context: React.PropTypes.shape({\n    roleAssignations: React.PropTypes.objectOf(React.PropTypes.number).isRequired\n  }).isRequired\n};\n\nEcologyFilter.defaultProps = {\n  method: 'atLeast'\n};\n\nexport default EcologyFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/EcologyFilter.jsx","import React from 'react';\nimport ComponentFilter from './ComponentFilter';\n\nconst filter = (targetOrTargets, role) => {\n  if (typeof target === 'string') {\n    return targetOrTargets === role;\n  }\n  return targetOrTargets.includes(role);\n};\n\nconst RoleFilter = props => (\n  <ComponentFilter rendered={filter(props.target, props.context.role)}>\n    { props.children }\n  </ComponentFilter>\n);\n\nRoleFilter.propTypes = {\n  target: React.PropTypes.oneOfType([\n    React.PropTypes.string,\n    React.PropTypes.arrayOf(React.PropTypes.string)\n  ]).isRequired,\n  children: React.PropTypes.node.isRequired,\n  context: React.PropTypes.shape({\n    role: React.PropTypes.string\n  }).isRequired\n};\n\nexport default RoleFilter;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/RoleFilter.jsx","import React from 'react';\n\nexport default React.PropTypes.shape({\n  role: React.PropTypes.string,\n  roleAssignations: React.PropTypes.objectOf(React.PropTypes.number).isRequired\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/context-prop-type.js","import SockJS from 'sockjs-client';\n\nconst nullFunc = () => {};\n\nexport default class ModelSync {\n\n  constructor(serverAddress = `http://${location.host}${ModelSync._PREFIX}`, role) {\n    this._role = role;\n\n    this._appData = null;\n    this._context = null;\n\n    this.onUpdate = nullFunc;\n    this.onConnected = nullFunc;\n    this.onDisconnected = nullFunc;\n\n    this._socket = new SockJS(serverAddress);\n    this._socket.onmessage = this._onSocketMessage.bind(this);\n    this._socket.onopen = this._onSocketOpen.bind(this);\n    this._socket.onclose = this._onSocketClose.bind(this);\n  }\n\n  setAppData(appData) {\n    this._socketSend('set_app_data', appData);\n  }\n\n  get role() {\n    return this._role;\n  }\n\n  _onSocketOpen() {\n    if (this._role) {\n      this._socketSend('set_socket_role', this._role);\n    }\n    this._socketSend('app_data_request', this._role);\n    this.onConnected();\n  }\n\n  _onSocketMessage(originalMessage) {\n    const message = JSON.parse(originalMessage.data);\n    const messageType = message.type;\n    const messageData = message.data;\n    switch (messageType) {\n      case 'app_data':\n        this._appData = messageData;\n        this.onUpdate(this._appData, this._context);\n        break;\n      case 'meta_data':\n        this._context = {\n          role: this._role,\n          roleAssignations: messageData.clientRoles\n        };\n        this.onUpdate(this._appData, this._context);\n        break;\n      default:\n        console.warn(`Unknown message type: ${messageType}`);\n    }\n  }\n\n  _onSocketClose() {\n    this.onDisconnected();\n  }\n\n  _socketSend(type, data) {\n    this._socket.send(JSON.stringify({ type, data }));\n  }\n\n}\n\nModelSync._PREFIX = '/socket';\n\n\n\n// WEBPACK FOOTER //\n// ./lib/dirty-model-sync.js","const EcologyFilter = require('./EcologyFilter');\nconst RoleFilter = require('./RoleFilter');\nconst contextPropType = require('./context-prop-type');\nconst dirtyModelSync = require('./dirty-model-sync');\n\nmodule.exports = { EcologyFilter, RoleFilter, contextPropType, dirtyModelSync };\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"SockJS\",\"amd\":\"sockjs-client\",\"commonjs\":\"sockjs-client\",\"commonjs2\":\"sockjs-client\"}\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}